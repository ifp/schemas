{
  "$schema": "http://iglucentral.com/schemas/com.snowplowanalytics.self-desc/schema/jsonschema/1-0-0#",
  "title": "IFP Internal JSON Advert Schema",
  "description": "The full internal JSON schema of property adverts within the IFP systems. Currently supports sale properties only. Do not use this schema if sending us data. Instead, please use https://github.com/ifp/schemas/blob/master/json/public_advert-schema_v1.0.0.json",
  "self": {
    "vendor": "com.french-property.schemas.json",
    "name": "internal_sale_property_advert",
    "format": "jsonschema",
    "version": "1-0-0"
  },
  "type": "object",
  "properties": {
    "action": {
      "type": "string",
      "enum": [
        "upsert"
      ],
      "default": "upsert"
    },
    "id": {
      "type": "string"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time"
    },
    "created_at": {
      "type": "string",
      "format": "date-time"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "api_version": {
          "type": "string"
        },
        "processed_at": {
          "type": "string",
          "format": "date-time"
        },
        "processed_at_unix_ts": {
          "type": "integer"
        },
        "originating_system": {
          "type": [
            "string"
          ],
          "enum": [
            "importer",
            "exporter",
            "checker"
          ],
          "default": "importer"
        }
      },
      "required": [
        "api_version",
        "processed_at",
        "processed_at_unix_ts",
        "originating_system"
      ],
      "additionalProperties": false
    },
    "advert": {
      "type": "object",
      "properties": {
        "agency_id": {
          "type": "integer"
        },
        "agency_tag": {
          "type": "string"
        },
        "agency_external_id": {
          "type": [
            "null",
            "string"
          ]
        },
        "agency_name": {
          "type": "string"
        },
        "agency_phone": {
          "type": [
            "null",
            "string"
          ]
        },
        "agency_email": {
          "type": [
            "null",
            "string"
          ]
        },
        "agency_website": {
          "type": [
            "null",
            "string"
          ]
        },
        "agency_microsite": {
          "type": [
            "null",
            "string"
          ]
        },
        "agency_branch_name": {
          "type": [
            "null",
            "string"
          ]
        },
        "agency_branch_code": {
          "type": [
            "null",
            "string"
          ]
        },
        "agency_branch_phone": {
          "type": [
            "null",
            "string"
          ]
        },
        "agency_branch_email": {
          "type": [
            "null",
            "string"
          ]
        },
        "agency_branch_website": {
          "type": [
            "null",
            "string"
          ]
        },
        "agent_name": {
          "type": [
            "null",
            "string"
          ]
        },
        "agent_external_id": {
          "type": [
            "null",
            "string"
          ]
        },
        "agent_phone": {
          "type": [
            "null",
            "string"
          ]
        },
        "agent_email": {
          "type": [
            "null",
            "string"
          ]
        },
        "agent_website": {
          "type": [
            "null",
            "string"
          ]
        },
        "reference": {
          "type": [
            "null",
            "string"
          ]
        },
        "type": {
          "type": [
            "string"
          ],
          "enum": [
            "other",
            "sale"
          ],
          "default": "sale"
        },
        "format": {
          "type": "array",
          "items": {
            "type": [
              "string"
            ],
            "enum": [
              "free",
              "featured_banner",
              "featured_network",
              "featured_newsletter",
              "featured_propertyspy",
              "featured_search",
              "featured_website",
              "standard"
            ]
          },
          "minItems": 1,
          "uniqueItems": true
        },
        "visibility": {
          "type": [
            "string"
          ],
          "enum": [
            "all",
            "ifp",
            "network"
          ],
          "default": "network"
        },
        "pre_attributed": {
          "type": "object",
          "properties": {
            "types": {
              "type": "array",
              "items": {
                "type": [
                  "string"
                ],
                "enum": [
                  "_unclassified",
                  "residential",
                  "business",
                  "apartment",
                  "apartment_building",
                  "bar",
                  "barn",
                  "bed_and_breakfast",
                  "cafe",
                  "campsite",
                  "chateau",
                  "farm",
                  "gite",
                  "gite_complex",
                  "hotel",
                  "house",
                  "house_boat",
                  "lake",
                  "land",
                  "mobile_home",
                  "office",
                  "restaurant",
                  "shop",
                  "vineyard"
                ]
              },
              "minItems": 0,
              "uniqueItems": true
            },
            "features": {
              "type": "array",
              "items": {
                "type": [
                  "string"
                ],
                "enum": [
                  "balcony",
                  "central_heating",
                  "double_glazing",
                  "en_suite",
                  "lake",
                  "outbuildings",
                  "pond",
                  "swimming_pool",
                  "tennis_court",
                  "terrace",
                  "vineyard"
                ]
              },
              "minItems": 0,
              "uniqueItems": true
            },
            "tags": {
              "type": "array",
              "items": {
                "type": [
                  "string"
                ],
                "enum": [
                  "chalet",
                  "coastal",
                  "cottage",
                  "detached",
                  "equestrian",
                  "farmhouse",
                  "gite",
                  "gite_potential",
                  "luxury",
                  "maison_de_maitre",
                  "mansion",
                  "mill",
                  "modern",
                  "mountain",
                  "newbuild_offplan",
                  "period_features",
                  "revenue_generating",
                  "rural",
                  "single_storey",
                  "ski_in_ski_out",
                  "ski_resort",
                  "to_renovate",
                  "town",
                  "villa",
                  "village"
                ]
              },
              "minItems": 0,
              "uniqueItems": true
            }
          },
          "required": [
            "types",
            "features",
            "tags"
          ],
          "additionalProperties": false
        },
        "status": {
          "type": [
            "string"
          ],
          "enum": [
            "archived",
            "deleted",
            "incomplete",
            "offline",
            "online"
          ],
          "default": "online"
        },
        "approval": {
          "type": [
            "string"
          ],
          "enum": [
            "approved",
            "deferred",
            "denied",
            "pending"
          ],
          "default": "pending"
        },
        "url": {
          "type": [
            "null",
            "string"
          ]
        },
        "feed_urls": {
          "type": "array",
          "items": {
            "type": [
              "string"
            ]
          },
          "minItems": 0,
          "uniqueItems": true
        },
        "created_at": {
          "type": [
            "null",
            "string"
          ]
        },
        "updated_at": {
          "type": [
            "null",
            "string"
          ]
        },
        "live_at": {
          "type": [
            "null",
            "string"
          ],
          "format": "date-time"
        },
        "significantly_updated_at": {
          "type": "string",
          "format": "date-time"
        },
        "update_conflicts": {
          "type": [
            "array",
            "null",
            "object"
          ],
          "additionalProperties": true
        }
      },
      "required": [
        "agency_id",
        "agency_tag",
        "agency_external_id",
        "agency_name",
        "agency_phone",
        "agency_email",
        "agency_website",
        "agency_microsite",
        "agency_branch_name",
        "agency_branch_code",
        "agency_branch_phone",
        "agency_branch_email",
        "agent_name",
        "agent_external_id",
        "agent_phone",
        "agent_email",
        "reference",
        "type",
        "format",
        "visibility",
        "pre_attributed",
        "status",
        "approval",
        "url",
        "feed_urls",
        "created_at",
        "updated_at",
        "live_at",
        "significantly_updated_at",
        "update_conflicts"
      ],
      "additionalProperties": false
    },
    "property": {
      "type": "object",
      "properties": {
        "status": {
          "type": "string",
          "enum": [
            "for_sale",
            "let",
            "sold",
            "sold_subject_to_contract",
            "to_let",
            "under_offer",
            "withdrawn"
          ],
          "default": "for_sale"
        },
        "title_en": {
          "type": "string"
        },
        "title_fr": {
          "type": [
            "null",
            "string"
          ]
        },
        "description_en": {
          "type": "string"
        },
        "description_fr": {
          "type": [
            "null",
            "string"
          ]
        },
        "highlights": {
          "type": "array",
          "items": {
            "type": [
              "string"
            ]
          },
          "minItems": 0,
          "uniqueItems": true
        },
        "geo": {
          "$ref": "https://raw.githubusercontent.com/ifp/schemas/master/json/geo-locality-schema_v1.0.0.json"
        },
        "price": {
          "type": "object",
          "properties": {
            "amount": {
              "type": "number"
            },
            "currency": {
              "type": "string",
              "enum": [
                "EUR"
              ]
            },
            "user_amount": {
              "type": "number"
            },
            "user_currency": {
              "type": "string",
              "enum": [
                "EUR"
              ]
            },
            "comment": {
              "type": [
                "string",
                "null"
              ]
            },
            "tenure": {
              "type": "string",
              "enum": [
                "fractional",
                "freehold",
                "leasehold",
                "life_annuity"
              ],
              "default": "freehold"
            },
            "qualifier": {
              "type": "string",
              "enum": [
                "asking_price",
                "auction_guide_price",
                "offers_in_excess_of",
                "offers_in_region_of",
                "price_from",
                "price_on_application"
              ],
              "default": "asking_price"
            }
          },
          "required": [
            "amount",
            "currency",
            "user_amount",
            "user_currency",
            "comment",
            "tenure",
            "qualifier"
          ],
          "additionalProperties": false
        },
        "room_counts": {
          "type": "object",
          "properties": {
            "total_rooms": {
              "type": [
                "integer",
                "null"
              ]
            },
            "total_bathrooms": {
              "type": [
                "integer",
                "null"
              ]
            },
            "bathrooms": {
              "type": [
                "integer",
                "null"
              ]
            },
            "bedrooms": {
              "type": [
                "integer",
                "null"
              ]
            },
            "reception_rooms": {
              "type": [
                "integer",
                "null"
              ]
            },
            "shower_rooms": {
              "type": [
                "integer",
                "null"
              ]
            },
            "water_closets": {
              "type": [
                "integer",
                "null"
              ]
            }
          },
          "required": [
            "total_rooms",
            "total_bathrooms",
            "bathrooms",
            "bedrooms",
            "reception_rooms",
            "shower_rooms",
            "water_closets"
          ],
          "additionalProperties": false
        },
        "floor_area": {
          "type": "object",
          "properties": {
            "size": {
              "type": [
                "null",
                "number"
              ]
            },
            "unit": {
              "type": "string",
              "enum": [
                "m²",
                "ac",
                "ha"
              ],
              "default": "m²"
            },
            "user_size": {
              "type": [
                "null",
                "number"
              ]
            },
            "user_unit": {
              "type": "string",
              "enum": [
                "m²",
                "ac",
                "ha"
              ],
              "default": "m²"
            }
          },
          "required": [
            "size",
            "unit",
            "user_size",
            "user_unit"
          ],
          "additionalProperties": false
        },
        "land_area": {
          "type": "object",
          "properties": {
            "size": {
              "type": [
                "null",
                "number"
              ]
            },
            "unit": {
              "type": "string",
              "enum": [
                "m²",
                "ac",
                "ha"
              ],
              "default": "m²"
            },
            "user_size": {
              "type": [
                "null",
                "number"
              ]
            },
            "user_unit": {
              "type": "string",
              "enum": [
                "m²",
                "ac",
                "ha"
              ],
              "default": "m²"
            }
          },
          "required": [
            "size",
            "unit",
            "user_size",
            "user_unit"
          ],
          "additionalProperties": false
        },
        "energy_certificates": {
          "type": "object",
          "properties": {
            "dpe": {
              "type": "object",
              "properties": {
                "number": {
                  "type": [
                    "null",
                    "number"
                  ]
                },
                "letter": {
                  "type": [
                    "null",
                    "string"
                  ],
                  "enum": [
                    null,
                    "A",
                    "B",
                    "C",
                    "D",
                    "E",
                    "F",
                    "G"
                  ]
                },
                "date": {
                  "type": [
                    "null",
                    "string"
                  ],
                  "format": "date-time"
                }
              },
              "required": [
                "number",
                "letter",
                "date"
              ],
              "additionalProperties": false
            },
            "ges": {
              "type": "object",
              "properties": {
                "number": {
                  "type": [
                    "null",
                    "number"
                  ]
                },
                "letter": {
                  "type": [
                    "null",
                    "string"
                  ],
                  "enum": [
                    null,
                    "A",
                    "B",
                    "C",
                    "D",
                    "E",
                    "F",
                    "G"
                  ]
                },
                "date": {
                  "type": [
                    "string",
                    "null"
                  ],
                  "format": "date-time"
                }
              },
              "required": [
                "number",
                "letter",
                "date"
              ],
              "additionalProperties": false
            }
          },
          "required": [
            "dpe",
            "ges"
          ],
          "additionalProperties": false
        },
        "attributes": {
          "type": "object",
          "properties": {
            "types": {
              "type": "array",
              "items": {
                "type": [
                  "string"
                ],
                "enum": [
                  "_unclassified",
                  "residential",
                  "business",
                  "apartment",
                  "apartment_building",
                  "bar",
                  "barn",
                  "bed_and_breakfast",
                  "cafe",
                  "campsite",
                  "chateau",
                  "farm",
                  "gite",
                  "gite_complex",
                  "hotel",
                  "house",
                  "house_boat",
                  "lake",
                  "land",
                  "mobile_home",
                  "office",
                  "restaurant",
                  "shop",
                  "vineyard"
                ]
              },
              "minItems": 1,
              "uniqueItems": true
            },
            "features": {
              "type": "array",
              "items": {
                "type": [
                  "string"
                ],
                "enum": [
                  "balcony",
                  "central_heating",
                  "double_glazing",
                  "en_suite",
                  "lake",
                  "outbuildings",
                  "pond",
                  "swimming_pool",
                  "tennis_court",
                  "terrace",
                  "vineyard"
                ]
              },
              "minItems": 0,
              "uniqueItems": true
            },
            "tags": {
              "type": "array",
              "items": {
                "type": [
                  "string"
                ],
                "enum": [
                  "chalet",
                  "coastal",
                  "cottage",
                  "detached",
                  "equestrian",
                  "farmhouse",
                  "gite",
                  "gite_potential",
                  "luxury",
                  "maison_de_maitre",
                  "mansion",
                  "mill",
                  "modern",
                  "mountain",
                  "newbuild_offplan",
                  "period_features",
                  "revenue_generating",
                  "rural",
                  "single_storey",
                  "ski_in_ski_out",
                  "ski_resort",
                  "to_renovate",
                  "town",
                  "villa",
                  "village"
                ]
              },
              "minItems": 0,
              "uniqueItems": true
            }
          },
          "required": [
            "types",
            "features",
            "tags"
          ],
          "additionalProperties": false
        },
        "images": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "listing_position": {
                "type": "integer"
              },
              "title": {
                "type": [
                  "null",
                  "string"
                ]
              },
              "cloudinary_account": {
                "type": "string"
              },
              "public_id": {
                "type": "string"
              },
              "version": {
                "type": [
                  "null",
                  "string"
                ]
              },
              "width": {
                "type": [
                  "integer",
                  "null"
                ]
              },
              "height": {
                "type": [
                  "integer",
                  "null"
                ]
              },
              "format": {
                "type": [
                  "null",
                  "string"
                ],
                "enum": [
                  null,
                  "gif",
                  "jpe",
                  "jpeg",
                  "jpg",
                  "png"
                ]
              },
              "bytes": {
                "type": [
                  "integer",
                  "null"
                ]
              },
              "original_url": {
                "type": [
                  "null",
                  "string"
                ]
              },
              "original_bytes": {
                "type": [
                  "integer",
                  "null"
                ]
              }
            },
            "required": [
              "listing_position",
              "title",
              "cloudinary_account",
              "public_id",
              "version",
              "width",
              "height",
              "format",
              "bytes",
              "original_url",
              "original_bytes"
            ],
            "additionalProperties": true
          },
          "minItems": 0,
          "uniqueItems": true
        },
        "floor_plans": {
          "type": "array",
          "items": {
            "type": [
              "string"
            ]
          },
          "minItems": 0,
          "uniqueItems": true
        },
        "virtual_tours": {
          "type": "array",
          "items": {
            "type": [
              "string"
            ]
          },
          "minItems": 0,
          "uniqueItems": true
        }
      },
      "required": [
        "status",
        "title_en",
        "title_fr",
        "description_en",
        "description_fr",
        "highlights",
        "geo",
        "price",
        "room_counts",
        "floor_area",
        "land_area",
        "energy_certificates",
        "attributes",
        "images",
        "floor_plans",
        "virtual_tours"
      ],
      "additionalProperties": false
    },
    "original_property": {
      "additionalProperties": true
    }
  },
  "required": [
    "action",
    "id",
    "updated_at",
    "created_at",
    "metadata",
    "advert",
    "property",
    "original_property"
  ],
  "additionalProperties": false
}
